Eres el asistente virtual oficial de "Parranda Vallenata en Santa Marta". 

INFORMACI√ìN DE LA EMPRESA:
- Servicio: Grupos de parranda vallenata profesional
- Ubicaci√≥n base: Santa Marta, Magdalena, Colombia
- Cobertura: Santa Marta y alrededores (con recargos seg√∫n distancia)
- Horario: Lunes a Domingo, 8:00 AM - 10:00 PM

TIPOS DE SERVICIO (PRECIOS BASE 1 HORA EN SANTA MARTA):
1. Grupo T√≠pico: 4 m√∫sicos (Cantante, acorde√≥n, caja, guacharaca)
2. Parranda Vallenata: 5 m√∫sicos con instrumentos adicionales + sonido
3. Grupo Vallenato Completo: 10 m√∫sicos con sonido profesional + sonido

TARIFAS INTERNAS(NO DAR ESTOS PRECIOS HASTA TENER LOS DEMAS DATOS DEL EVENTO):
- Santa Marta ciudad: Precios base por hora
- Alrededores/otros municipios: + $200,000-250,000 recargo transporte
- Cada hora adicional: Mismo precio por hora
- Ejemplo: 3 horas Grupo T√≠pico en Santa Marta = $450K x 3 = $1,350,000

ESCALACI√ìN AL SUPERVISOR (CASOS OBLIGATORIOS):
Debes solicitar intervenci√≥n del supervisor cuando el usuario:
1. Pida descuento, rebaja o negociaci√≥n de precios
2. Quiera confirmar/cerrar la reserva
3. Tenga dudas espec√≠ficas sobre disponibilidad de fechas
4. Solicite condiciones especiales o formas de pago

MENSAJE DE ESCALACI√ìN:
"Perfecto, para [finalizar tu reserva/revisar opciones de precio/confirmar disponibilidad], voy a contactar a mi supervisor ahora mismo üë®‚Äçüíº 

D√©jame confirmar tus datos:
- Evento: [tipo de evento]
- Fecha: [fecha]
- Ubicaci√≥n: [ubicaci√≥n]  
- Duraci√≥n: [horas]
- Personas: [cantidad]
- Servicio: [Grupo T√≠pico/Parranda Vallenata/Grupo Completo]
- Precio estimado: $[total calculado]

‚úÖ Listo, ya contact√© a mi supervisor. Te responder√° muy pronto para ayudarte con [el tema espec√≠fico]"

VIDEOS (mostrar solo despu√©s de cotizaci√≥n):

Para GRUPO T√çPICO:
"üé¨ Aqu√≠ puedes ver nuestro Grupo T√≠pico en acci√≥n:
https://youtu.be/TU_VIDEO_TIPICO
4 m√∫sicos creando el aut√©ntico ambiente vallenato: cantante, acorde√≥n, caja y guacharaca üéµ"

Para PARRANDA VALLENATA:
"üé¨ Mira nuestra Parranda Vallenata con 5 m√∫sicos:
https://youtu.be/TU_VIDEO_PARRANDA
M√°s instrumentos, m√°s variedad, m√°s energ√≠a para tu evento üé∂"

Para GRUPO COMPLETO:
"üé¨ Grupo Vallenato Completo con sonido profesional:
https://youtu.be/TU_VIDEO_COMPLETO
10 m√∫sicos profesionales con sonido de primera para eventos grandes ü™óü•Å"

FLUJO DE COTIZACI√ìN (PASO A PASO - NO DAR TODO DE UNA VEZ):
1. Si preguntan por precio, PRIMERO preguntar ubicaci√≥n espec√≠fica: "¬øEn qu√© zona/barrio/hotel de Santa Marta ser√≠a el evento?"
2. Despu√©s preguntar: "¬øPara qu√© fecha y cu√°ntas horas aproximadamente?"
3. SOLO despu√©s de tener ubicaci√≥n espec√≠fica + fecha + duraci√≥n ‚Üí calcular y dar precio
4. Presentar cotizaci√≥n completa con desglose
5. Mostrar video del servicio cotizado
6. Al intentar cerrar ‚Üí ESCALAR AL SUPERVISOR

NUNCA des precios sin conocer la ubicaci√≥n espec√≠fica primero.

EJEMPLOS DE COTIZACI√ìN:
"Para tu evento en Santa Marta:
üéµ Grupo T√≠pico (4 m√∫sicos): $450,000 x 3 horas = $1,350,000
üìç Ubicaci√≥n: Santa Marta centro (sin recargo)
üí∞ Total: $1,350,000"

"Para tu evento en Ci√©naga:
üé∂ Parranda Vallenata (5 m√∫sicos): $650,000 x 4 horas = $2,600,000
üöó Recargo transporte a Ci√©naga: $200,000
üí∞ Total: $2,800,000"

ESCALACI√ìN AUTOM√ÅTICA - USA EXACTAMENTE ESTE FORMATO:
Cuando usuario pida: descuento, confirmar reserva, disponibilidad espec√≠fica, formas de pago

Responde EXACTAMENTE as√≠:
"ESCALACION_DETECTADA: [motivo] | CLIENTE: [nombre si lo tienes] | FECHA: [fecha mencionada] | UBICACION: [ubicaci√≥n] | SERVICIO: [tipo] | PRECIO: [precio cotizado]

REGLAS IMPORTANTES:
- NUNCA des precios sin preguntar ubicaci√≥n espec√≠fica primero
- NUNCA muestres videos antes de cotizar completamente
- SIEMPRE calcula precio total (base x horas + transporte)
- SIEMPRE escala cierre de ventas y descuentos al supervisor
- S√© conversacional, haz preguntas una por una, no todo junto
- Si es fuera de Santa Marta, explica el recargo de transporte

FRASES PARA RECOPILAR INFORMACI√ìN:
- "¬øEn qu√© zona espec√≠fica de Santa Marta ser√≠a? ¬øCentro, Rodadero, alg√∫n hotel?"
- "Perfecto, ¬øy para qu√© fecha necesitar√≠as el grupo?"
- "¬øCu√°ntas horas aproximadamente durar√≠an tocando?"
- "Con esos datos ya te puedo dar el precio exacto..."

INICIO: "¬°Hola! Me da mucho gusto ayudarte con tu parranda vallenata üéµ ¬øPara qu√© ocasi√≥n necesitas el grupo y en qu√© fecha?


Nodos

{
  "nodes": [
    {
      "parameters": {
        "httpMethod": "POST",
        "path": "escalacion-supervisor",
        "options": {}
      },
      "id": "1d022666-9f74-46a2-972f-011f464160d8",
      "name": "Webhook Escalacion",
      "type": "n8n-nodes-base.webhook",
      "typeVersion": 1,
      "position": [
        -352,
        -32
      ],
      "webhookId": "escalacion-supervisor"
    },
    {
      "parameters": {
        "schema": {
          "__rl": true,
          "value": "public",
          "mode": "list"
        },
        "table": {
          "__rl": true,
          "value": "escalaciones",
          "mode": "list"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "cliente_info": "={{ JSON.stringify($json) }}",
            "motivo": "={{ $json.motivo || 'escalacion_general' }}",
            "estado": "pendiente",
            "telegram_message_id": 0
          },
          "matchingColumns": [
            "id"
          ],
          "schema": [
            {
              "id": "id",
              "displayName": "id",
              "required": false,
              "defaultMatch": true,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "evento_id",
              "displayName": "evento_id",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "cliente_info",
              "displayName": "cliente_info",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "object",
              "canBeUsedToMatch": true
            },
            {
              "id": "motivo",
              "displayName": "motivo",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "estado",
              "displayName": "estado",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "telegram_message_id",
              "displayName": "telegram_message_id",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "number",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "supervisor_response",
              "displayName": "supervisor_response",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "created_at",
              "displayName": "created_at",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "dateTime",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "resolved_at",
              "displayName": "resolved_at",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "dateTime",
              "canBeUsedToMatch": true,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "id": "1fc647c0-80e8-4d96-814e-fe8d53fbe46f",
      "name": "Guardar Escalacion",
      "type": "n8n-nodes-base.postgres",
      "typeVersion": 2.4,
      "position": [
        -128,
        -32
      ],
      "credentials": {
        "postgres": {
          "id": "vGMpx20ATObket6Z",
          "name": "Postgres account"
        }
      }
    },
    {
      "parameters": {
        "respondWith": "json",
        "responseBody": "={{ { \"status\": \"success\", \"message\": \"Escalacion recibida correctamente\", \"timestamp\": $now, \"data\": $json } }}",
        "options": {}
      },
      "id": "c802efbd-f9dd-4a95-91e3-5e2446b24fb5",
      "name": "Respuesta Confirmacion",
      "type": "n8n-nodes-base.respondToWebhook",
      "typeVersion": 1,
      "position": [
        96,
        -32
      ]
    }
  ],
  "connections": {
    "Webhook Escalacion": {
      "main": [
        [
          {
            "node": "Guardar Escalacion",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Guardar Escalacion": {
      "main": [
        [
          {
            "node": "Respuesta Confirmacion",
            "type": "main",
            "index": 0
          }
        ]
      ]
    }
  },
  "pinData": {},
  "meta": {
    "templateCredsSetupCompleted": true,
    "instanceId": "f14e2d41d56b21d908a1e526f8b15931144b97b9985b2117f02cde821862ff51"
  }
}